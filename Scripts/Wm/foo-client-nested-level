#!/usr/bin/env ruby
require 'json'


def crawl(x, count, id)
  if (!x || x["children"] == "") then
    return
  end

  if x["children"].size != 0 then
    x["children"].each do |y|
      crawl(y, count + 1, id)
    end
  end
  if (x["id"] == id) then
    puts count
    exit
  end
end

tree = JSON.parse(%x[foo-wm-c '/tmp/foo-wm.socket' 'get tree'])
focus = JSON.parse(%x[foo-wm-c '/tmp/foo-wm.socket' 'get focus'])["id"]
crawl(tree, 0, focus)
