#!/usr/bin/env ruby
require 'json'
focus = JSON.parse(%x[foo-wm-c '/tmp/foo-wm.socket' 'get focus'])
if (focus["type"] == "client") then
  puts JSON focus
elsif (focus["type"] == "container") then
  focus["children"].each do |c|
    if (c["node"] == focus["focus"]) then
      puts JSON c
    end
  end
end

